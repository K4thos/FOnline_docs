<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />

<meta http-equiv="X-UA-Compatible" content="IE=9" />
<meta name="generator" content="Doxygen 1.8.3.1" />
<title>FOnline: Создание карт</title>
<script type="text/javascript" src="jquery.js">
</script>
<script type="text/javascript" src="dynsections.js">
</script>
<link rel="stylesheet" href="files/helpindex.css" type=
"text/css" />
<link rel="stylesheet" href="default.css" type="text/css" />

<script type="text/JavaScript" src="files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "page_creatingmap.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"index.html?page=page_creatingmap.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"index.html?page=page_creatingmap.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<div id="top">
<!-- do not remove this div, it is closed by doxygen! -->

<div id="titlearea">
<table cellspacing="0" cellpadding="0">
<tbody>
<tr style="height: 56px;">
<td id="projectlogo"><img alt="Logo" src="logo.jpg" />
</td>
<td style="padding-left: 0.5em;">
<div id="projectname">FOnline</div>
</td>
</tr>
</tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.3.1 -->

<div id="navrow1" class="tabs">
<ul class="tablist">
<li><a href="index.html"><span>Титульная&nbsp;страница</span></a>
</li>

<li class="current"><a href="pages.html"><span>Описания</span></a>
</li>

<li><a href="modules.html"><span>Группы</span></a>
</li>

<li><a href="annotated.html"><span>Классы</span></a>
</li>
</ul>
</div>

<div id="nav-path" class="navpath">
<ul>
<li class="navelem"><a class="el" href="manual.html">Учебник</a>
</li>

<li class="navelem"><a class="el" href=
"page_manuals.html">Пособия</a>
</li>
</ul>
</div>
</div>
<!-- top -->

<div class="header">
<div class="headertitle">
<div class="title">Создание карт</div>
</div>
</div>
<!--header-->

<div class="contents">
<div class="textblock">
<p><b>Создаем первую карту</b>
</p>

<p>Для того, чтобы создать новую карту, вызовите консоль [Enter] и
наберите “*new”.</p>

<div class="image"><img src="creatingmap01.jpg" alt=
"CreatingMap01.jpg" />
</div>

<p>Выберите в открывшемся окне Tile, и разместите несколько тайлов.
Для этого щелкните по тайлу в поле выбора объекта левой кнопкой,
затем правой кнопкой, чтобы курсор принял форму выбранного тайла, а
затем по полю карты левой кнопкой. Помните, что можно выделить
тайлы и скопировать их ([Ctrl+C] по выделенным тайлам, затем
[Ctrl+V], клик правой кнопкой и перенос в нужное место).</p>

<div class="image"><img src="creatingmap02.jpg" alt=
"CreatingMap02.jpg" />
</div>

<p>В закладке Tile находятся тайлы и для пола, и для крыш;
переключение между позициями, на которые надо вставить тайл,
осуществляется шелчком средней кнопкой/колесиком мыши.</p>

<p>Теперь попробуем разместить стены. Для этого щелкните Wall, и
разместите несколько стен. Помните, что при расстановке стен по
диагонали необходимо чередовать короткие и длинные куски.</p>

<div class="image"><img src="creatingmap03.jpg" alt=
"CreatingMap03.jpg" />
</div>

<p>Каждый раз, когда вы ставите стену, у вас будет появляться
подобное окно (выделено красной рамкой). Для того, чтобы убрать ее,
щелкните левой кнопкой по карте. Можно также выключать ее
отображение клавишей [F9], однако это не рекомендуется, так как вам
все равно придется «отключать» ее левым щелчком по карте. Конкретно
для стен вам вряд ли потребуется изменение каких-либо настроек.</p>

<p>Переключитесь в Gen и поставьте вентиляцию и компьютер.</p>

<div class="image"><img src="creatingmap04.jpg" alt=
"CreatingMap04.jpg" />
</div>

<p>Теперь попробуем поставить дверь. В Dor выберите нужную дверь и
поставьте ее в проход. Появится окно настроек, в котором нас
интересуют следующие значения:</p>

<div class="image"><img src="creatingmap05.jpg" alt=
"CreatingMap05.jpg" />
</div>

<p><b>DoorId</b> – этот параметр соответствует номеру ключа, на
который закрывается дверь.</p>

<p><b>Complexity</b> – уровень сложности замка. Высчитывается по
формуле «Навык взлома – сложность замка». Максимальное значение –
95.</p>

<p>Со значениями по умолчанию (0,0) дверь можно открывать без
ключа.</p>

<p>Когда у нас поставлена дверь и сделана комната, самое время
проверить блокеры. Уберите видимость стен [F3] и нажмите
[Ctrl+B].</p>

<div class="image"><img src="creatingmap06.jpg" alt=
"CreatingMap06.jpg" />
</div>

<p>Как видите, некоторые гексы оказались свободнопроходимыми. Это
связано с тем, что блокировка у одного объекта распространяется
только на один гекс, чтобы наша комната получилась действительно
изолированной, выберите во вкладке Fast зеленый гекс с буквой W и
поставьте его на место пробелов (если потребуется – включите
обратно отображении стен.</p>

<div class="image"><img src="creatingmap07.jpg" alt=
"CreatingMap07.jpg" />
</div>

<p>Теперь в комнату уже никто не пройдет. Но не стоит забывать, что
блокировка требуется не только стенам, но и gen-объектам. В нашем
случае это компьютер. Выберите во вкладке Fast ярко-зеленый гекс с
буквой S, и расставьте его по всем проходимым клеткам около
компьютера.</p>

<div class="image"><img src="creatingmap08.jpg" alt=
"CreatingMap08.jpg" />
</div>

<p>Блокеры W отличаются от блокеров S тем, что последние могут
простреливаться.</p>

<p>После того, как наша комната оказалась действительно
изолированной, мы можем поставить около нее несколько
криттеров.</p>

<div class="image"><img src="creatingmap09.jpg" alt=
"CreatingMap09.jpg" />
</div>

<p>Когда вы выбираете криттера, внизу в поле выбора объектов у него
автоматически открывается вкладка инвентарь. Сейчас она пуста. Для
того, чтобы добавить в инвентарь криттера объекты, щелкните по
нужной вам вкладке (например, оружие), и нажмите на объект с
зажатым [Alt]. Он добавится в инвентарь. Если вы хотите добавить
оружие в слот криттеру, поместите его в инвентарь, а затем щелкните
по оружию в инвентаре с зажатым [Shift].</p>

<p>Кроме вкладки инвентаря, открывается окно параметров
криттера.</p>

<ul>
<li><b>ProtoId</b> – номер прототипа NPC, в котором описаны все его
характеристики и параметры брони.</li>

<li><b>DialogId</b> – номер диалога.</li>

<li><b>AiPacket</b> - информация об искусственном интеллекте NPC,
находятся в AI.TXT. Если стоит 0, то информация берется из
прототипа NPC.</li>

<li><b>ScriptId</b> – номер скрипта, если есть.</li>

<li><b>Cond</b> и <b>CondExt</b> – начальные состояния криттера,
значения находятся в _defines.fos.</li>

<li><b>IsMob</b> – моб ли этот NPC. Если да, то он всегда будет
атаковать любого игрока, и его радиус обзора увеличен в 2
раза.</li>

<li><b>BagId</b> – отвечает за инвентарь NPC.</li>

<li><b>TeamId</b> – отвечает за команды NPC. Значения можно
посмотреть в файле Teams.txt. Новые команды рекомендуется создавать
после согласования.</li>
</ul>

<p>После того, как вы справились с этой задачей, приступим к
окончательному созданию пола. Переключите Tab’ом режим выделения,
отметьте Tile на панели выделения, и скопируйте тайлы на всю
карту.</p>

<div class="image"><img src="creatingmap10.jpg" alt=
"CreatingMap10.jpg" />
</div>

<p>Самое время расставить скроллблокеры – блокираторы прокрутки, не
дающие игроку пролистать дальше карты. Для этого во вкладке Fast
выбираем белый гекс с буквой S и расставляем их в нужном порядке,
желательно прямоугольником, не забывая пользоваться возможности
копирования (для этого нужно отметить Scen в настройках
выделения).</p>

<div class="image"><img src="creatingmap11.jpg" alt=
"CreatingMap11.jpg" />
</div>

<p>Помните, что минимальный размер карты должен подходить под
разрешение 1280х1024. Проверяйте карты при разных размерах окна
маппера (он, также как и клиент, подчиняется FOConfig).</p>

<p>Расставив все блокеры, нам нужно сделать две следующие вещи:
сделать точку входа на карту и отметить точки выхода. Не забудьте
поставить точки входа для транспорта (243 и 245), если карта это
предполагает.</p>

<p>На каждой карте обязательно должен присутствовать один объект
Scen и Wall. На картах пустыни их можно поставить за
скролл-блокеры. Без них маппер может вылетать при попытке
сохранения карты.</p>

<p><b>FAQ по картостроению:</b>
</p>

<p><b>1. Как сделать ящики/двери закрытыми?</b><br />
Выставьте им произвольный LockerId. Теперь ящик закрыт. Если вы
хотите повысить сложность взлома, выставьте некое значение
Complexity. Сложность замка не принято выставлять больше, чем 95.
Проверка на взлом осуществляется по формуле
RANDOM(5,95)&lt;(SK_LOCKPICK-Complexity). Если вы хотите сделать
невзламываемую дверь, либо выставьте ей сложность замка = 300, либо
пропишите ей скрипт item@_ClosedDoorInit. Для того, чтобы дверь
сама захлопывалась со временем, присвойте ей скрипт
item@_DoorAutoCloseInit.</p>

<p><b>2. Как рисовать трупы?</b><br />
Откройте окно свойств криттера. Выставьте Cond=3. Далее, при
необходимости, пропишите нужный CondExt (тип смерти):</p>

<div class="fragment">
<div class="line"><span class="preprocessor">#define
COND_DEAD_FRONT (1)</span>
</div>

<div class="line"><span class="preprocessor">#define COND_DEAD_BACK
(2)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_BURST (3)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_BLOODY_SINGLE (4)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_BLOODY_BURST (5)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_PULSE (6)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_PULSE_DUST (7)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_LASER (8)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_EXPLODE (9)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_FUSED (10)</span>
</div>

<div class="line"><span class="preprocessor">#define COND_DEAD_BURN
(11)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_BURN2 (12)</span>
</div>

<div class="line"><span class="preprocessor">#define
COND_DEAD_BURN_RUN (13)</span>
</div>
</div>
<!-- fragment -->
<p>Не у всех криттеров есть все типы смерти.<br />
Если вы не хотите, чтобы криттер "ожил" через некоторое время,
пропишите ему <a class="el" href=
"group___stats.html#gafca7f381c8beb884be65ea7ba2a5f969">ST_REPLICATION_TIME</a>=-1.
Cond=2 - криттер в нокауте. Однако, он встанет сразу после загрузки
сервера, поэтому лежачим криттерам надо присваивать индивидуальный
скрипт.</p>

<p><b>3. Как сделать многоэтажную карту?</b><br />
Многоэтажных карт, как в Fallout 1/2, в FOnline нет. Чтобы сделать
карту многоэтажной, просто нарисуйте несколько отдельных карт,
пропишите их в <a class="el" href=
"page_locationscfg.html">Locations.cfg</a> как части одной локации,
а затем свяжите лестницами и переходами.</p>

<p><b>4. Как сделать оружие изношенным?</b><br />
Откройте панель свойств оружия, впишите нужное значение износа в
поле "DeteorationValue". Можно также выставить количество поломок
(DeteorationCount) или сделать оружие сломанным (DeteorationFlags).
Флаги поломок:</p>

<div class="fragment">
<div class="line"><span class="preprocessor">#define BI_LOWBROKEN
(0x01)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_NORMBROKEN
(0x02)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_HIGHBROKEN
(0x04)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_NOTRESC
(0x08)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_BROKEN
(0x0F)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_SERVICE
(0x10)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_SERVICE_EXT
(0x20)</span>
</div>

<div class="line"><span class="preprocessor">#define BI_ETERNAL
(0x40)</span>
</div>
</div>
<!-- fragment -->
<p><b>5. Напомните, как рисовать крышу?</b><br />
Тайлы крыш находятся в одном списке с тайлами пола. Для того, чтобы
переключиться между рисовкой крыш или пола, нажмите среднюю кнопку
мыши (колесико).</p>
</div>
</div>
<!-- contents -->
<!-- start footer part -->

<hr class="footer" />

<address class="footer"><small>Документация по FOnline. Последние
изменения: Вт 28 Май 2013 01:58:03. Создано системой &nbsp;<a href=
"http://www.doxygen.org/index.html"><img class="footer" src=
"doxygen.png" alt="doxygen" /></a> 1.8.3.1</small>
</address>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("" + chmtop.c2wtopf.pageid);
}
</script>

<!-- CHM2WEB -->
<!-- DO NOT DELETE OR MODIFY THIS CODE WITHOUT 
     WRITTEN PERMISSION OF A!K RESEARCH LABS -->
<table width="100%" cellspacing="0" cellpadding="0" 
style="margin-top: 0pt; border-collapse: collapse;"> 
<tr> <td align="right" style="background-color:white; border-top: 1px solid gray;"> 
<a href="http://chm2web.aklabs.com" target="_blank" style="font-family: sans-serif;  font-size: 11px; text-decoration: none;"><font color="gray">Converted from CHM to HTML with <b>chm2web Pro 2.85 (unicode)</b></font></a>
</td></tr></table> 
<!-- /CHM2WEB -->

</body>
</html>
